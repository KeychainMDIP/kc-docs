"use strict";(self.webpackChunkkc_docs=self.webpackChunkkc_docs||[]).push([[183],{3370:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>o});var i=t(4848),s=t(8453);const a={title:"Working with IDs",sidebar_label:"IDs",slug:"ids"},d=void 0,r={id:"CLI-user-manual/ids",title:"Working with IDs",description:"The identity operations below meet the specifications defined by W3C DID Core.",source:"@site/kc/doc/CLI-user-manual/03-ids.md",sourceDirName:"CLI-user-manual",slug:"/CLI-user-manual/ids",permalink:"/docs/CLI-user-manual/ids",draft:!1,unlisted:!1,editUrl:"https://github.com/keychainmdip/kc-docs/tree/main/packages/create-docusaurus/templates/shared/kc/doc/CLI-user-manual/03-ids.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"Working with IDs",sidebar_label:"IDs",slug:"ids"},sidebar:"tutorialSidebar",previous:{title:"Wallets",permalink:"/docs/CLI-user-manual/wallets"},next:{title:"DIDs",permalink:"/docs/CLI-user-manual/dids"}},c={},o=[{value:"What is an ID?",id:"what-is-an-id",level:2},{value:"Creating an ID",id:"creating-an-id",level:2},{value:"Resolve Current Agent ID",id:"resolve-current-agent-id",level:2},{value:"Backing up an ID",id:"backing-up-an-id",level:2},{value:"Removing an ID",id:"removing-an-id",level:2},{value:"Recovering an ID",id:"recovering-an-id",level:2},{value:"Listing IDs",id:"listing-ids",level:2},{value:"Switching IDs",id:"switching-ids",level:2},{value:"Rotating an ID&#39;s Keys",id:"rotating-an-ids-keys",level:2}];function l(e){const n={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["The identity operations below meet the specifications defined by ",(0,i.jsx)(n.a,{href:"https://www.w3.org/TR/did-core/",children:"W3C DID Core"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"what-is-an-id",children:"What is an ID?"}),"\n",(0,i.jsx)(n.p,{children:"An ID (identity) refers to the digital identification of an agent DID stored in a user wallet. The user can create new identities on demand, locally, at no cost and with no need of any networking capabilities. An identity's agent DID can be registered with a supported DID registry."}),"\n",(0,i.jsx)(n.p,{children:"We see examples of these DIDs throughout this document. An MDIP DID example looks like this:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"did:mdip:z3v8AuagsGQwffFd2oVhkdcTWRBi2ps5FdRAJD4jzEVMszkYBCj"})}),"\n",(0,i.jsx)(n.h2,{id:"creating-an-id",children:"Creating an ID"}),"\n",(0,i.jsx)(n.p,{children:"Creating a new agent DID uses the wallet's key-pairs to generate a new DID identifier:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"$ kc create-id Alice\ndid:mdip:test:z3v8AuabRm9DaiakqbwFPgsLd6vSYBQtdj7poQFGYBgsZCfqTvY\n"})}),"\n",(0,i.jsx)(n.p,{children:"The new DID and associated name are stored the user's private wallet:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'$ kc show-wallet\n{\n    "seed": {\n        "mnemonic": "MLPxAgU1ym_v_YR2Q6-nY47L8xxMqbJqG_NzRNBh3_MHcZ4QQA2x3DI4fSAG2g-XHC3M_EGtmqY6NhVpsC9yKysFYQmcqjm7cAknpJajZYCVlVs7hJPRLdOqkpy4eotTVblgZdYsYtcgbU9kmYc",\n        "hdkey": {\n            "xpriv": "xprv9s21ZrQH143K2x2kGfQ7tgaVHZYQkQVQKbuHgQ4wG7qjfsBoMQD35Ly6rupdEDED1ZBWKtRGWnjwcf9Wxbyvwn4idCPe1kayCrBoLAp8Hvb",\n            "xpub": "xpub661MyMwAqRbcFS7DNgw8FpXDqbNu9sDFgpptUnUYpTNiYfWwtwXHd9HaiD1pEfLtMGVBKpCR9D6Vtriqkv7co4W72stnzpLdxPRmuLWJUHS"\n        }\n    },\n    "counter": 1,\n    "ids": {\n        "Alice": {\n            "did": "did:mdip:test:z3v8AuabRm9DaiakqbwFPgsLd6vSYBQtdj7poQFGYBgsZCfqTvY",\n            "account": 0,\n            "index": 0\n        }\n    },\n    "current": "Alice"\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"The new DID can also be registered on any MDIP registry the user chooses."}),"\n",(0,i.jsx)(n.h2,{id:"resolve-current-agent-id",children:"Resolve Current Agent ID"}),"\n",(0,i.jsxs)(n.p,{children:["Resolving an ID means fetching the documents associated with an ID. The current CLI user's agent documents can be displayed using the command ",(0,i.jsx)(n.code,{children:"kc resolve-id"})," without a DID argument:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'$ kc resolve-id\n{\n    "@context": "https://w3id.org/did-resolution/v1",\n    "didDocument": {\n        "@context": [\n            "https://www.w3.org/ns/did/v1"\n        ],\n        "id": "did:mdip:test:z3v8AuabRm9DaiakqbwFPgsLd6vSYBQtdj7poQFGYBgsZCfqTvY",\n        "verificationMethod": [\n            {\n                "id": "#key-1",\n                "controller": "did:mdip:test:z3v8AuabRm9DaiakqbwFPgsLd6vSYBQtdj7poQFGYBgsZCfqTvY",\n                "type": "EcdsaSecp256k1VerificationKey2019",\n                "publicKeyJwk": {\n                    "crv": "secp256k1",\n                    "kty": "EC",\n                    "x": "3tJzOiiSFhDIzMcg_YGLtzvBjs5L9DhBvRmUZVEbV5c",\n                    "y": "eVUruQfrt1Fx_m2CW7t0KHrRk-JlHzgZLY6LPC3lgjU"\n                }\n            }\n        ],\n        "authentication": [\n            "#key-1"\n        ]\n    },\n    "didDocumentMetadata": {\n        "created": "2024-03-22T14:48:41.213Z"\n    },\n    "didDocumentData": {},\n    "mdip": {\n        "registry": "hyperswarm",\n        "type": "agent",\n        "version": 1\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"backing-up-an-id",children:"Backing up an ID"}),"\n",(0,i.jsx)(n.p,{children:"Backing up an identity is the process of posting an encrypted document DID to the identity's vault. The vault DID document contains the encrypted history of the identity at the time of the backup, enabling recovery of all Verifiable Credentials (VCs) associated with the DID:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"$ kc backup-id\nOK\n"})}),"\n",(0,i.jsxs)(n.p,{children:["After running ",(0,i.jsx)(n.code,{children:"backup-id"}),", note the new ",(0,i.jsx)(n.code,{children:"vault"})," key in the agent document:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'$ kc resolve-id\n{\n    "@context": "https://w3id.org/did-resolution/v1",\n    "didDocument": {\n        "@context": [\n            "https://www.w3.org/ns/did/v1"\n        ],\n        "id": "did:mdip:test:z3v8AuabRm9DaiakqbwFPgsLd6vSYBQtdj7poQFGYBgsZCfqTvY",\n\n    ...\n\n    "didDocumentData": {\n        "vault": "did:mdip:test:z3v8AuafhKoRuEkDTjyoabgPXKx4Yi4cPmPdzUgMNyKxkzYNA6u"\n    },\n    \n    ...\n\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Note that each wallet and each identity have their own backups. This will allow the user to chose a different MDIP registry (or no registry) with different security or permanence attributes for a particular identity (ie: some DIDs will be more valuable than others to the user)."}),"\n",(0,i.jsx)(n.h2,{id:"removing-an-id",children:"Removing an ID"}),"\n",(0,i.jsx)(n.p,{children:"At any time, a user may remove a named DID from their wallet:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"$ kc remove-id Alice\nID Alice removed\n"})}),"\n",(0,i.jsx)(n.h2,{id:"recovering-an-id",children:"Recovering an ID"}),"\n",(0,i.jsx)(n.p,{children:"Recovery of a DID's history using the Vault DID is possible because the Vault data is encrypted with the wallet's keys. The wallet keys are used to decrypt the Vault DID data containing the DID's private history:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"$ kc recover-id did:mdip:test:z3v8AuabRm9DaiakqbwFPgsLd6vSYBQtdj7poQFGYBgsZCfqTvY\nRecovered Alice!\n"})}),"\n",(0,i.jsx)(n.h2,{id:"listing-ids",children:"Listing IDs"}),"\n",(0,i.jsx)(n.p,{children:"A user's wallet may contain any number of MDIP agent DID identities:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"$ kc create-id Bob\ndid:mdip:test:z3v8AuairhLoGZqf6UDKw7zXyBknTvanvSzFHnLpwy8nwa7WLzk\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",metastring:"{3}",children:"$ kc list-ids\nAlice\nBob  <<< current\n"})}),"\n",(0,i.jsx)(n.h2,{id:"switching-ids",children:"Switching IDs"}),"\n",(0,i.jsx)(n.p,{children:"A user can switch between their various MDIP identities:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"kc use-id Alice\nOK\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",metastring:"{2}",children:"$ kc list-ids\nAlice  <<< current\nBob\n"})}),"\n",(0,i.jsx)(n.h2,{id:"rotating-an-ids-keys",children:"Rotating an ID's Keys"}),"\n",(0,i.jsx)(n.p,{children:"A user can rotate the public keys associated with a particular DID. This is a common privacy and security feature that allows the user to keep the same DID but sign future documents with new keys."}),"\n",(0,i.jsxs)(n.p,{children:["The command ",(0,i.jsx)(n.code,{children:"rotate-keys"})," rotates the keys of the wallet's currently active user id:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'$ kc rotate-keys\n{\n    "@context": "https://w3id.org/did-resolution/v1",\n    "didDocument": {\n        "@context": [\n            "https://www.w3.org/ns/did/v1"\n        ],\n        "id": "did:mdip:test:z3v8AuabRm9DaiakqbwFPgsLd6vSYBQtdj7poQFGYBgsZCfqTvY",\n        "verificationMethod": [\n            {\n                "id": "#key-2",\n                "controller": "did:mdip:test:z3v8AuabRm9DaiakqbwFPgsLd6vSYBQtdj7poQFGYBgsZCfqTvY",\n                "type": "EcdsaSecp256k1VerificationKey2019",\n                "publicKeyJwk": {\n                    "kty": "EC",\n                    "crv": "secp256k1",\n                    "x": "e3j21wCPrDSUiY4fQaPYYNLZ-7wcOI6d_WcLy3RTSWc",\n                    "y": "9-kZlDiwShHihazR15z9VYEIks9W3PKdt0Cae7FJFA4"\n                }\n            }\n        ],\n        "authentication": [\n            "#key-2"\n        ]\n    },\n    "didDocumentMetadata": {\n        "created": "2024-03-22T14:48:41.213Z",\n        "updated": "2024-03-22T14:53:23.565Z"\n    },\n    "didDocumentData": {\n        "vault": "did:mdip:test:z3v8AuafhKoRuEkDTjyoabgPXKx4Yi4cPmPdzUgMNyKxkzYNA6u"\n    },\n    "mdip": {\n        "registry": "hyperswarm",\n        "type": "agent",\n        "version": 1\n    }\n}\n'})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>d,x:()=>r});var i=t(6540);const s={},a=i.createContext(s);function d(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);