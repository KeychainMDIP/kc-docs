"use strict";(self.webpackChunkkc_docs=self.webpackChunkkc_docs||[]).push([[782],{9921:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>p,frontMatter:()=>r,metadata:()=>s,toc:()=>c});var a=t(4848),i=t(8453);const r={title:"Working with Wallets",sidebar_label:"Wallets",slug:"wallets"},l=void 0,s={id:"CLI-user-manual/wallets",title:"Working with Wallets",description:"[!WARNING]",source:"@site/kc/doc/CLI-user-manual/02-wallets.md",sourceDirName:"CLI-user-manual",slug:"/CLI-user-manual/wallets",permalink:"/pr-preview/pr-$pr/docs/CLI-user-manual/wallets",draft:!1,unlisted:!1,editUrl:"https://github.com/keychainmdip/kc-docs/tree/main/packages/create-docusaurus/templates/shared/kc/doc/CLI-user-manual/02-wallets.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Working with Wallets",sidebar_label:"Wallets",slug:"wallets"},sidebar:"tutorialSidebar",previous:{title:"User Manual",permalink:"/pr-preview/pr-$pr/docs/CLI-user-manual/"},next:{title:"IDs",permalink:"/pr-preview/pr-$pr/docs/CLI-user-manual/ids"}},o={},c=[{value:"What is a Wallet?",id:"what-is-a-wallet",level:2},{value:"Creating a Wallet",id:"creating-a-wallet",level:2},{value:"Backing Up and Recovering a Wallet",id:"backing-up-and-recovering-a-wallet",level:2}];function d(e){const n={admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.admonition,{type:"warning",children:[(0,a.jsx)(n.p,{children:"The Keychain CLI wallet is only to be used for experimental and development purposes."}),(0,a.jsx)(n.p,{children:"The Keychain CLI wallet is not encrypted and is stored on the local user's file system. Future MDIP wallets will implement additional capabilities (ex: SIWYS). 3rd party wallet developers will also be invited to create MDIP-compatible user wallet implementations."})]}),"\n",(0,a.jsx)(n.h2,{id:"what-is-a-wallet",children:"What is a Wallet?"}),"\n",(0,a.jsx)(n.p,{children:"The wallet contains a user's private data, including secret keys and associated DIDs. The Keychain-CLI wallet also includes a user's locally named alias for each identity DID."}),"\n",(0,a.jsx)(n.h2,{id:"creating-a-wallet",children:"Creating a Wallet"}),"\n",(0,a.jsx)(n.p,{children:"Creating a wallet generates a unique seed that is used to derive a hierarchical-deterministic key-pair. This key-pair will be used to generate new unique key-pairs for each future DID generated using this wallet:"}),"\n",(0,a.jsx)(n.admonition,{type:"note",children:(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"kc create-wallet"})," does nothing when you already have a wallet, like the one created by ",(0,a.jsx)(n.code,{children:"create-id"}),"."]})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'$ kc create-wallet\n{\n    "seed": {\n        "mnemonic": "P6f40acil4qA1oIHhoK_qNfBPjvdiTn8djxLtcIGMmu5ojQ0g-fAGLLn33Ix5TavvQTzvc6kXax509bQBZZiXjb7ibTToGyUn0oPeBvSV0RcvHOSXWRmATqIqd7dpQrdXqWAwVuxeQ3vy95e2NU",\n        "hdkey": {\n            "xpriv": "xprv9s21ZrQH143K2x2kGfQ7tgaVHZYQkQVQKbuHgQ4wG7qjfsBoMQD35Ly6rupdEDED1ZBWKtRGWnjwcf9Wxbyvwn4idCPe1kayCrBoLAp8Hvb",\n            "xpub": "xpub661MyMwAqRbcFS7DNgw8FpXDqbNu9sDFgpptUnUYpTNiYfWwtwXHd9HaiD1pEfLtMGVBKpCR9D6Vtriqkv7co4W72stnzpLdxPRmuLWJUHS"\n        }\n    },\n    "counter": 0,\n    "ids": {}\n}\n'})}),"\n",(0,a.jsxs)(n.p,{children:["Use the command ",(0,a.jsx)(n.code,{children:"show-wallet"})," to view the contents of your wallet; initially, the wallet is empty, but we will see private content added to the wallet as we create MDIP identities and operations:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'$ kc show-wallet\n{\n    "seed": {\n        "mnemonic": "BeSI1tnY5TtWweCdEHESV98MXc8CUCu0pFNZ1tLR-0XaP9PvtCcbcUrGfwwIy4qakOkL0hT88xl4Ko3SXbL3U6pEBY4rcROqEwnUuKUN2z9Dx4nKGNz29SDy1GaLV14NbYc1AEa01TEULJr1xzD5",\n        "hdkey": {\n            "xpriv": "xprv9s21ZrQH143K3MtcqnFrvMQKXVjV37BpYtZo47Vpy9xt44godPRrhcHgrejDPhBCnBk2K8z6CRzPGMDmeDmQGeuDsFwkmE14mrTEv4R33xy",\n            "xpub": "xpub661MyMwAqRbcFqy5wonsHVM45XZySZufv7VPrVuSXVVrvs1xAvk7FQcAhxLja5tXXhAv3nPqqftr3E7TmfbUKRXohhHb53N7AiN1iQvwa8p"\n        }\n    },\n    "counter": 0,\n    "ids": {}\n}\n'})}),"\n",(0,a.jsx)(n.h2,{id:"backing-up-and-recovering-a-wallet",children:"Backing Up and Recovering a Wallet"}),"\n",(0,a.jsx)(n.p,{children:"To recover a wallet from a backup, you need two pieces of information:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"the seed phrase, aka mnemonic,"}),"\n",(0,a.jsx)(n.li,{children:"the backup DID."}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"The mnemonic consists of 12 short words (BIP-39) that are used to generate the wallet's private keys:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"$ kc show-mnemonic\nknow soon mind pen polar pulse patient salmon wage friend equip rotate\n"})}),"\n",(0,a.jsx)(n.p,{children:"Creating a wallet backup encrypts the current state of a user wallet content in a DID Document:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"$ kc backup-wallet\ndid:mdip:test:z3v8Auairrc7XjSdoA1QvuytZXmGdmjcaFsPb2xKjM6TzowPKRn\n"})}),"\n",(0,a.jsx)(n.p,{children:"If you lose the wallet file, you can regenerate the private keys from the mnemonic:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'$ kc import-wallet "know soon mind pen polar pulse patient salmon wage friend equip rotate"\n{\n    "seed": {\n        "mnemonic": "8PnD0nzyjd9TphttasCFXg_HNDntYdQlx_JHG6Y8K-U7nZUmkxeB4BLYv8xA9af-r6OChSul1Lp6gRPve7qnU_pOVTOE9c7qew-X7Nv_Vd6by-3IxI03ryHkgNjNTOxHlA6iae0D9wA6sFak",\n        "hdkey": {\n            "xpriv": "xprv9s21ZrQH143K4Yd3NBDr5kALF4foaGBbiocmBv9UuMeet9urHgi1LKaB51ud1SrRtfxhtbRTxjjTQMQei1BewYnBVnu3Wp5G13Ab768K7qF",\n            "xpub": "xpub661MyMwAqRbcH2hWUCkrSt74o6WHyiuT62YMzJZ6ThBdkxEzqE2Ft7tevKxzKH4xLdXpUqd32whgcTE3TJTmCgJYqoXvXn6sdaEsWAUCBbZ"\n        }\n    },\n    "counter": 0,\n    "ids": {}\n}\n'})}),"\n",(0,a.jsx)(n.p,{children:"Once a wallet's keys are recreated from the mnemonic, you can recover its contents from a backup DID generated using the backup process above:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'$ kc recover-wallet did:mdip:z3v8AuaXcTg74E4nWXDkX3wtZXjGjvp55z7QYixWSUHyG89qFTy\n{\n    "seed": {\n        "mnemonic": "P6f40acil4qA1oIHhoK_qNfBPjvdiTn8djxLtcIGMmu5ojQ0g-fAGLLn33Ix5TavvQTzvc6kXax509bQBZZiXjb7ibTToGyUn0oPeBvSV0RcvHOSXWRmATqIqd7dpQrdXqWAwVuxeQ3vy95e2NU",\n        "hdkey": {\n            "xpriv": "xprv9s21ZrQH143K2x2kGfQ7tgaVHZYQkQVQKbuHgQ4wG7qjfsBoMQD35Ly6rupdEDED1ZBWKtRGWnjwcf9Wxbyvwn4idCPe1kayCrBoLAp8Hvb",\n            "xpub": "xpub661MyMwAqRbcFS7DNgw8FpXDqbNu9sDFgpptUnUYpTNiYfWwtwXHd9HaiD1pEfLtMGVBKpCR9D6Vtriqkv7co4W72stnzpLdxPRmuLWJUHS"\n        }\n    },\n    "counter": 1,\n    "ids": {\n        "extropy": {\n            "did": "did:mdip:test:z3v8AuaiyHqG3KMpcoBoqvUpMrtCsGsu8iPU1oTEfcsUNxtGyt4",\n            "account": 0,\n            "index": 0\n        }\n    },\n    "current": "extropy"\n}\n'})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"recover-wallet"})," does not overwrite the existing wallet, it only prints the contents of the backup. The output should be redirected to a temporary ",(0,a.jsx)(n.code,{children:"wallet.json"})," file, which can then be copied over the existing wallet in the ",(0,a.jsx)(n.code,{children:"./data"})," folder."]}),"\n",(0,a.jsxs)(n.p,{children:["Do not redirect or pipe the output directly to the existing ",(0,a.jsx)(n.code,{children:"wallet.json"})," file, which will cause an error."]})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>s});var a=t(6540);const i={},r=a.createContext(i);function l(e){const n=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);