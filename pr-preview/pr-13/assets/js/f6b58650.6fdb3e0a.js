"use strict";(self.webpackChunkkc_docs=self.webpackChunkkc_docs||[]).push([[773],{9716:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>i,metadata:()=>l,toc:()=>d});var s=a(4848),t=a(8453);const i={title:"Working with Challenges and Responses",sidebar_label:"Challenges and Responses",slug:"challenge-responses"},r=void 0,l={id:"CLI-user-manual/challenge-responses",title:"Working with Challenges and Responses",description:"What is a challenge and response?",source:"@site/kc/doc/CLI-user-manual/07-challenge-responses.md",sourceDirName:"CLI-user-manual",slug:"/CLI-user-manual/challenge-responses",permalink:"/docs/CLI-user-manual/challenge-responses",draft:!1,unlisted:!1,editUrl:"https://github.com/keychainmdip/kc-docs/tree/main/packages/create-docusaurus/templates/shared/kc/doc/CLI-user-manual/07-challenge-responses.md",tags:[],version:"current",sidebarPosition:7,frontMatter:{title:"Working with Challenges and Responses",sidebar_label:"Challenges and Responses",slug:"challenge-responses"},sidebar:"tutorialSidebar",previous:{title:"DID Manifest",permalink:"/docs/CLI-user-manual/manifests"},next:{title:"Aliased Names",permalink:"/docs/CLI-user-manual/aliased-names"}},c={},d=[{value:"What is a challenge and response?",id:"what-is-a-challenge-and-response",level:2},{value:"Creating a Challenge",id:"creating-a-challenge",level:2},{value:"Creating a Verifiable Presentation Response",id:"creating-a-verifiable-presentation-response",level:2},{value:"Verifying a VP Response",id:"verifying-a-vp-response",level:2}];function o(e){const n={admonition:"admonition",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"what-is-a-challenge-and-response",children:"What is a challenge and response?"}),"\n",(0,s.jsx)(n.p,{children:"The VC model enables 3rd party entities to issue a Challenge requesting proof from a VC Holder. The VC Holder may respond (at the holder's discretion) with a Verifiable Presentation providing tamper-proof evidence data in response to the Challenge request."}),"\n",(0,s.jsx)(n.h2,{id:"creating-a-challenge",children:"Creating a Challenge"}),"\n",(0,s.jsxs)(n.p,{children:["The challenge is created from a schema file or from an existing DID pointing to an existing schema credential. To create a challenge from a schema file, use ",(0,s.jsx)(n.code,{children:"kc create-challenge"}),"; to create a challenge from an existing credential DID, use ",(0,s.jsx)(n.code,{children:"kc create-challenge-cc"})," instead."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"$ kc create-challenge-cc social-media sm-challenge\ndid:mdip:test:z3v8AuaaxRxwZCPUnpCc4RoV5CZjeYVJepmJTVeJrpvyyB6LmwN\n"})}),"\n",(0,s.jsxs)(n.p,{children:["In the command above, ",(0,s.jsx)(n.code,{children:"social-media"})," is a named alias in Alice's wallet that resolves to the DID of the social-medial credential in examples above. ",(0,s.jsx)(n.code,{children:"sm-challenge"})," is a new named alias in Alice's wallet that contains the DID of the new challenge document:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'$ kc resolve-did sm-challenge\n{\n    "@context": "https://w3id.org/did-resolution/v1",\n    "didDocument": {\n        "@context": [\n            "https://www.w3.org/ns/did/v1"\n        ],\n        "id": "did:mdip:test:z3v8AuaaxRxwZCPUnpCc4RoV5CZjeYVJepmJTVeJrpvyyB6LmwN",\n        "controller": "did:mdip:test:z3v8AuabRm9DaiakqbwFPgsLd6vSYBQtdj7poQFGYBgsZCfqTvY"\n    },\n    "didDocumentMetadata": {\n        "created": "2024-03-22T18:18:35.413Z"\n    },\n    "didDocumentData": {\n        "credentials": [\n            {\n                "schema": "did:mdip:test:z3v8AuaeAPf9JMuyYZ1D79D626uUzDQmRPwq4d8oB1Th6ztzAS7"\n            }\n        ]\n    },\n    "mdip": {\n        "registry": "hyperswarm",\n        "type": "asset",\n        "version": 1\n    }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"creating-a-verifiable-presentation-response",children:"Creating a Verifiable Presentation Response"}),"\n",(0,s.jsx)(n.p,{children:"When presented with a challenge, a user can prepare a Verifiable Presentation of the credentials claims requested in the challenge."}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"The user can first verify that they are using the identity they want to create a Verifiable Presentation for:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"$ kc use-id Bob\nOK\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Next, the user can optionally create their own alias to interact with the challenge DID:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"$ kc add-name sm-challenge did:mdip:test:z3v8AuaaxRxwZCPUnpCc4RoV5CZjeYVJepmJTVeJrpvyyB6LmwN\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsx)(n.p,{children:"If you're testing as both Alice and Bob from a single wallet, you can skip this step."})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Then the user can create a repsonse:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"$ kc create-response sm-challenge\ndid:mdip:test:z3v8AuadZ56m4x2UTpeY3HhSFvFQnrCUyASBYA77vqrqQr9SR99\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"The command above mapped the Challenge with previously received VCs and found one matching the request for Bob's twitter account attestation. The resulting DID document contains a Verifiable Presentation revealing the twitter account VC data encrypted to the requesting party (Alice)."}),"\n",(0,s.jsx)(n.h2,{id:"verifying-a-vp-response",children:"Verifying a VP Response"}),"\n",(0,s.jsx)(n.p,{children:"To verify the response received to a challenge, a user simply passes the DID of the VP received from the VC Holder being challenged."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'$ kc use-id Alice\nOK\nkc verify-response did:mdip:test:z3v8AuadZ56m4x2UTpeY3HhSFvFQnrCUyASBYA77vqrqQr9SR99\n[\n    {\n        "@context": [\n            "https://www.w3.org/ns/credentials/v2",\n            "https://www.w3.org/ns/credentials/examples/v2"\n        ],\n        "type": [\n            "VerifiableCredential",\n            "did:mdip:test:z3v8AuaeAPf9JMuyYZ1D79D626uUzDQmRPwq4d8oB1Th6ztzAS7"\n        ],\n        "issuer": "did:mdip:test:z3v8AuabRm9DaiakqbwFPgsLd6vSYBQtdj7poQFGYBgsZCfqTvY",\n        "validFrom": "2024-03-22T15:06:24.773Z",\n        "validUntil": null,\n        "credentialSubject": {\n            "id": "did:mdip:test:z3v8AuairhLoGZqf6UDKw7zXyBknTvanvSzFHnLpwy8nwa7WLzk"\n        },\n        "credential": {\n            "account": "https://twitter.com/bob",\n            "service": "twitter.com"\n        },\n        "signature": {\n            "signer": "did:mdip:test:z3v8AuabRm9DaiakqbwFPgsLd6vSYBQtdj7poQFGYBgsZCfqTvY",\n            "signed": "2024-03-22T18:00:19.405Z",\n            "hash": "62f7cb1a31d338d29287f9ce91b4da103391dca88b853ea1b05920c6049ae8ff",\n            "value": "37941a42492a431ceaff91c86de55eb0cd3ed98107a3ce19a76d88511b7fe2bc6fcf298c69e431b048ab0786e9624b647e4d03a4c26031c4c6e2b6882223defe"\n        }\n    }\n]\n'})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>r,x:()=>l});var s=a(6540);const t={},i=s.createContext(t);function r(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);